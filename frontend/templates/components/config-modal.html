<!-- Config Modal -->
<div class="config-modal" id="configModal">
    <div class="config-modal-content">
        <!-- Header -->
        <div class="modal-header">
            <div class="header-content">
                <h2>Configuración</h2>
                <button class="close-button" id="closeConfigModal">
                    <span class="material-icons">close</span>
                </button>
            </div>
        </div>

        <!-- Navigation -->
        <div class="modal-nav">
            <button class="nav-item active" data-section="search">
                <span class="material-icons">search</span>
                <span>Búsqueda</span>
            </button>
            <button class="nav-item" data-section="elastic">
                <span class="material-icons">analytics</span>
                <span>Elastic</span>
            </button>
            <button class="nav-item" data-section="sql">
                <span class="material-icons">storage</span>
                <span>SQL</span>
            </button>
            <button class="nav-item" data-section="config">
                <span class="material-icons">settings</span>
                <span>Config</span>
            </button>
        </div>

        <!-- Body -->
        <div class="modal-body">
            <!-- Search Section -->
            <div class="config-section active" id="searchSection">
                <div class="option-group">
                    <div class="section-header">
                        <h3>Modo de Búsqueda</h3>
                        <small class="info-text">Selecciona el método de búsqueda para los términos médicos</small>
                    </div>
                    <div class="radio-group">
                        <label class="checkbox-option">
                            <input type="radio" name="searchMode" value="multi_match" checked>
                            <div class="checkbox-content">
                                <div class="checkbox-title">Multi Match</div>
                                <div class="checkbox-description">Búsqueda directa en la base de datos utilizando coincidencia múltiple</div>
                            </div>
                        </label>
                        <label class="checkbox-option">
                            <input type="radio" name="searchMode" value="openai">
                            <div class="checkbox-content">
                                <div class="checkbox-title">OpenAI</div>
                                <div class="checkbox-description">Búsqueda asistida por IA utilizando OpenAI</div>
                                <!-- OpenAI Options -->
                                <div id="openaiOptions" class="checkbox-group" style="display: none;">
                                    <div class="checkbox-column">
                                        <label class="checkbox-option">
                                            <input type="checkbox" name="useOriginalTerm" checked>
                                            <div class="checkbox-content">
                                                <div class="checkbox-title">Usar término original</div>
                                                <div class="checkbox-description">Incluir el término de búsqueda original</div>
                                            </div>
                                        </label>
                                        <label class="checkbox-option">
                                            <input type="checkbox" name="useEnglishTerm" checked>
                                            <div class="checkbox-content">
                                                <div class="checkbox-title">Usar término en inglés</div>
                                                <div class="checkbox-description">Traducir y usar el término en inglés</div>
                                            </div>
                                        </label>
                                        <label class="checkbox-option">
                                            <input type="checkbox" name="useRelatedTerms" checked>
                                            <div class="checkbox-content">
                                                <div class="checkbox-title">Usar términos relacionados</div>
                                                <div class="checkbox-description">Incluir términos médicos relacionados</div>
                                            </div>
                                        </label>
                                    </div>
                                    <div class="checkbox-column">
                                        <label class="checkbox-option">
                                            <input type="checkbox" name="useTestTypes" checked>
                                            <div class="checkbox-content">
                                                <div class="checkbox-title">Usar tipos de prueba</div>
                                                <div class="checkbox-description">Incluir tipos de pruebas médicas relacionadas</div>
                                            </div>
                                        </label>
                                        <label class="checkbox-option">
                                            <input type="checkbox" name="useLoincCodes" checked>
                                            <div class="checkbox-content">
                                                <div class="checkbox-title">Usar códigos LOINC</div>
                                                <div class="checkbox-description">Incluir códigos LOINC relacionados</div>
                                            </div>
                                        </label>
                                        <label class="checkbox-option">
                                            <input type="checkbox" name="useKeywords" checked>
                                            <div class="checkbox-content">
                                                <div class="checkbox-title">Usar palabras clave</div>
                                                <div class="checkbox-description">Incluir palabras clave médicas relevantes</div>
                                            </div>
                                        </label>
                                    </div>
                                </div>
                            </div>
                        </label>
                    </div>
                </div>

                <div class="option-group">
                    <div class="section-header">
                        <h3>Base de Datos</h3>
                        <small class="info-text">Elige el motor de base de datos para realizar las búsquedas</small>
                    </div>
                    <div class="radio-group">
                        <label class="checkbox-option">
                            <input type="radio" name="dbMode" value="sql" checked>
                            <div class="checkbox-content">
                                <div class="checkbox-title">SQL</div>
                                <div class="checkbox-description">Búsqueda en base de datos SQL para resultados precisos</div>
                            </div>
                        </label>
                        <label class="checkbox-option">
                            <input type="radio" name="dbMode" value="elastic">
                            <div class="checkbox-content">
                                <div class="checkbox-title">Elasticsearch</div>
                                <div class="checkbox-description">Búsqueda avanzada con Elasticsearch para mayor flexibilidad</div>
                            </div>
                        </label>
                    </div>
                </div>
            </div>

            <!-- SQL Section -->
            <div class="config-section" id="sqlSection">
                <div class="option-group">
                    <div class="section-header">
                        <h3>Límites de Búsqueda</h3>
                        <small class="info-text">Configura los límites generales de la búsqueda SQL</small>
                    </div>
                    <div class="radio-group">
                        <label class="checkbox-option">
                            <input type="number" name="sqlMaxTotal" min="1" max="1000" value="150">
                            <div class="checkbox-content">
                                <div class="checkbox-title">Límite total de resultados</div>
                                <div class="checkbox-description">Número máximo de resultados a mostrar</div>
                            </div>
                        </label>
                        <label class="checkbox-option">
                            <input type="number" name="maxKeywords" min="1" max="20" value="5">
                            <div class="checkbox-content">
                                <div class="checkbox-title">Máximo de palabras clave</div>
                                <div class="checkbox-description">Número máximo de palabras clave a procesar</div>
                            </div>
                        </label>
                        <label class="checkbox-option">
                            <input type="number" name="maxPerKeyword" min="1" max="100" value="20">
                            <div class="checkbox-content">
                                <div class="checkbox-title">Resultados por palabra</div>
                                <div class="checkbox-description">Número máximo de resultados por cada palabra clave</div>
                            </div>
                        </label>
                    </div>
                </div>

                <div class="option-group">
                    <div class="section-header">
                        <h3>Modo de Búsqueda</h3>
                        <small class="info-text">Configura la precisión de la búsqueda SQL</small>
                    </div>
                    <div class="radio-group">
                        <label class="checkbox-option">
                            <input type="radio" name="sqlMode" value="strict" checked>
                            <div class="checkbox-content">
                                <div class="checkbox-title">Modo Estricto</div>
                                <div class="checkbox-description">Activa la búsqueda de coincidencias exactas para resultados más precisos</div>
                            </div>
                        </label>
                        <label class="checkbox-option">
                            <input type="radio" name="sqlMode" value="flexible">
                            <div class="checkbox-content">
                                <div class="checkbox-title">Modo Flexible</div>
                                <div class="checkbox-description">Permite variaciones y coincidencias parciales en las búsquedas</div>
                            </div>
                        </label>
                    </div>
                </div>
            </div>

            <!-- Elastic Section -->
            <div class="config-section" id="elasticSection">
                <div class="option-group">
                    <div class="section-header">
                        <h3>Límites de Resultados</h3>
                        <small class="info-text">Configura los límites generales de búsqueda</small>
                    </div>
                    <div class="radio-group">
                        <label class="checkbox-option">
                            <input type="number" name="maxTotal" min="1" max="1000" value="150">
                            <div class="checkbox-content">
                                <div class="checkbox-title">Límite total de resultados</div>
                                <div class="checkbox-description">Define el número máximo total de resultados</div>
                            </div>
                        </label>
                        <label class="checkbox-option">
                            <input type="number" name="maxPerKeyword" min="1" max="100" value="20">
                            <div class="checkbox-content">
                                <div class="checkbox-title">Límite por palabra clave</div>
                                <div class="checkbox-description">Define el número máximo de resultados por cada palabra clave</div>
                            </div>
                        </label>
                    </div>
                </div>

                <div class="option-group">
                    <div class="section-header">
                        <h3>Tipos de Búsqueda</h3>
                        <small class="info-text">Configura los diferentes métodos de búsqueda disponibles</small>
                    </div>
                    <div class="radio-group">
                        <label class="checkbox-option">
                            <div class="checkbox-content">
                                <div class="header-flex">
                                    <div class="header-text">
                                        <div class="checkbox-title">Búsqueda Exacta</div>
                                        <div class="checkbox-description">Encuentra coincidencias exactas con el término buscado</div>
                                    </div>
                                    <div class="toggle-container">
                                        <input type="checkbox" id="exactSearch" name="exactEnabled" class="toggle-checkbox" checked>
                                        <label for="exactSearch" class="toggle-switch"></label>
                                    </div>
                                </div>
                                <div id="exactOptions" class="slider-control" style="width: 100%;">
                                    <input type="range" name="exactPriority" min="0" max="100" value="75" style="width: 100%;">
                                    <div class="slider-text">
                                        <div class="slider-label">Prioridad</div>
                                        <span class="value-container">75%</span>
                                    </div>
                                </div>
                            </div>
                        </label>

                        <label class="checkbox-option">
                            <div class="checkbox-content">
                                <div class="header-flex">
                                    <div class="header-text">
                                        <div class="checkbox-title">Búsqueda Aproximada</div>
                                        <div class="checkbox-description">Encuentra términos similares, tolerando errores tipográficos</div>
                                    </div>
                                    <div class="toggle-container">
                                        <input type="checkbox" id="fuzzySearch" name="fuzzyEnabled" class="toggle-checkbox" checked>
                                        <label for="fuzzySearch" class="toggle-switch"></label>
                                    </div>
                                </div>
                                <div id="fuzzyOptions" class="slider-control" style="width: 100%;">
                                    <input type="range" name="fuzzyTolerance" min="0" max="100" value="50" style="width: 100%;">
                                    <div class="slider-text">
                                        <div class="slider-label">Tolerancia</div>
                                        <span class="value-container">50%</span>
                                    </div>
                                </div>
                            </div>
                        </label>

                        <label class="checkbox-option">
                            <div class="checkbox-content">
                                <div class="header-flex">
                                    <div class="header-text">
                                        <div class="checkbox-title">Búsqueda Inteligente</div>
                                        <div class="checkbox-description">Búsqueda avanzada con análisis semántico</div>
                                    </div>
                                    <div class="toggle-container">
                                        <input type="checkbox" id="smartSearch" name="smartEnabled" class="toggle-checkbox" checked>
                                        <label for="smartSearch" class="toggle-switch"></label>
                                    </div>
                                </div>
                                <div id="smartOptions" class="slider-control" style="width: 100%;">
                                    <input type="range" name="smartPrecision" min="0" max="100" value="75" style="width: 100%;">
                                    <div class="slider-text">
                                        <div class="slider-label">Precisión</div>
                                        <span class="value-container">75%</span>
                                    </div>
                                </div>
                            </div>
                        </label>
                    </div>
                </div>

                <div class="option-group">
                    <div class="section-header">
                        <div class="header-flex">
                            <div class="header-text">
                                <h3>Configuración Avanzada</h3>
                                <small class="info-text">Opciones adicionales para búsquedas especializadas</small>
                            </div>
                            <div class="toggle-container">
                                <input type="checkbox" id="showAdvanced" class="toggle-checkbox">
                                <label for="showAdvanced" class="toggle-switch"></label>
                            </div>
                        </div>
                    </div>
                    <div id="advancedOptions" style="display: none;">
                        <div class="radio-group">
                            <label class="checkbox-option">
                                <div class="checkbox-content">
                                    <div class="header-flex">
                                        <div class="header-text">
                                            <div class="checkbox-title">Longitud Mínima</div>
                                            <div class="checkbox-description">Número mínimo de caracteres para activar la búsqueda por prefijo</div>
                                        </div>
                                        <div class="toggle-container">
                                            <input type="checkbox" id="prefixSearch" name="prefixEnabled" class="toggle-checkbox">
                                            <label for="prefixSearch" class="toggle-switch"></label>
                                        </div>
                                    </div>
                                    <div id="prefixLengthOptions" class="input-number-container" style="display: none;">
                                        <input type="number" name="prefixMinLength" min="1" max="10" value="3">
                                        <span class="unit">caracteres</span>
                                    </div>
                                </div>
                            </label>

                            <label class="checkbox-option">
                                <div class="checkbox-content">
                                    <div class="header-flex">
                                        <div class="header-text">
                                            <div class="checkbox-title">Búsqueda con Comodines</div>
                                            <div class="checkbox-description">Usa caracteres comodín (* o ?) en la búsqueda</div>
                                        </div>
                                        <div class="toggle-container">
                                            <input type="checkbox" id="wildcardSearch" name="wildcardEnabled" class="toggle-checkbox">
                                            <label for="wildcardSearch" class="toggle-switch"></label>
                                        </div>
                                    </div>
                                    <div id="wildcardOptions" class="input-number-container" style="display: none;">
                                        <input type="number" name="maxWildcards" min="1" max="5" value="2">
                                        <span class="unit">comodines</span>
                                    </div>
                                </div>
                            </label>

                            <label class="checkbox-option">
                                <div class="checkbox-content">
                                    <div class="header-flex">
                                        <div class="header-text">
                                            <div class="checkbox-title">Búsqueda con Expresiones Regulares</div>
                                            <div class="checkbox-description">Usa expresiones regulares para búsquedas avanzadas</div>
                                        </div>
                                        <div class="toggle-container">
                                            <input type="checkbox" id="regexSearch" name="regexEnabled" class="toggle-checkbox">
                                            <label for="regexSearch" class="toggle-switch"></label>
                                        </div>
                                    </div>
                                    <div id="regexOptions" class="slider-control" style="display: none; width: 100%;">
                                        <input type="range" name="regexComplexity" min="0" max="100" value="50" style="width: 100%;">
                                        <div class="slider-text">
                                            <div class="slider-label">Complejidad</div>
                                            <span class="value-container">50%</span>
                                        </div>
                                    </div>
                                </div>
                            </label>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Config Section -->
            <div class="config-section" id="configSection">
                <div class="option-group">
                    <div class="section-header">
                        <h3>Gestión de Datos</h3>
                        <small class="info-text">Administra los datos y la configuración del sistema</small>
                    </div>
                    <div class="action-group">
                        <div class="action-item">
                            <button class="btn-action" id="exportConfig">
                                <span class="material-icons">file_download</span>
                                Exportar Configuración
                            </button>
                            <small class="info-text">Descarga un archivo JSON con toda la configuración</small>
                        </div>
                        <div class="action-item">
                            <button class="btn-action" id="importConfig">
                                <span class="material-icons">file_upload</span>
                                Importar Configuración
                            </button>
                            <small class="info-text">Carga un archivo de configuración previamente exportado</small>
                        </div>
                        <div class="action-item">
                            <button class="btn-action warning" id="deleteOntology">
                                <span class="material-icons">delete_forever</span>
                                Eliminar Ontología
                            </button>
                            <small class="info-text">Elimina todos los datos de ontología almacenados</small>
                        </div>
                        <div class="action-item">
                            <button class="btn-action warning" id="restoreDefaults">
                                <span class="material-icons">restore</span>
                                Restaurar Valores
                            </button>
                            <small class="info-text">Restablece todas las configuraciones a sus valores predeterminados</small>
                        </div>
                    </div>
                </div>

                <div class="option-group">
                    <div class="section-header">
                        <h3>Rendimiento</h3>
                        <small class="info-text">Configura aspectos de rendimiento del sistema</small>
                    </div>
                    <div class="input-group">
                        <label>
                            <span>Caché máximo</span>
                            <div class="input-number-container">
                                <input type="number" name="maxCacheSize" min="10" max="1000" value="100">
                                <span class="unit">MB</span>
                            </div>
                            <small class="info-text">Tamaño máximo de la caché en memoria</small>
                        </label>
                        <label>
                            <span>Tiempo de caché</span>
                            <div class="input-number-container">
                                <input type="number" name="cacheExpiry" min="1" max="72" value="24">
                                <span class="unit">horas</span>
                            </div>
                            <small class="info-text">Tiempo de expiración de la caché</small>
                        </label>
                    </div>
                </div>
            </div>
        </div>

        <!-- Footer -->
        <div class="modal-footer">
            <button class="btn-close" id="cancelConfig">Cancelar</button>
            <button class="btn-save" id="saveConfig">Guardar</button>
        </div>
    </div>
</div> 