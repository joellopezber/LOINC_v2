<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LOINC Search</title>
    <link rel="stylesheet" href="/static/css/styles.css">
</head>
<body>
    <header>
        <h1>LOINC Search</h1>
        <button id="configBtn" class="config-button" aria-label="Configuración">
            <span class="material-icons">settings</span>
        </button>
    </header>

    <main>
        <search-box></search-box>
        <div id="results" class="results-container"></div>
    </main>

    <config-modal></config-modal>

    <!-- Scripts -->
    <script type="module" src="/static/js/components/search-box.js"></script>
    <script type="module" src="/static/js/components/config-modal.js"></script>
    <script type="module">
        import { searchService } from '/static/js/services/search.service.js';
        
        // Configurar modal
        const configBtn = document.getElementById('configBtn');
        const configModal = document.querySelector('config-modal');
        
        configBtn.addEventListener('click', () => {
            configModal.show();
        });

        // Manejar resultados de búsqueda
        document.addEventListener('search-results', (e) => {
            const results = e.detail;
            const resultsContainer = document.getElementById('results');
            
            // Limpiar resultados anteriores
            resultsContainer.innerHTML = '';
            
            if (results.length === 0) {
                resultsContainer.innerHTML = '<p class="no-results">No se encontraron resultados</p>';
                return;
            }
            
            // Mostrar nuevos resultados
            results.forEach(result => {
                const resultElement = document.createElement('div');
                resultElement.className = 'result-item';
                resultElement.innerHTML = `
                    <h3>${result.term}</h3>
                    <p><strong>Código LOINC:</strong> ${result.code}</p>
                    <p><strong>Tipo:</strong> ${result.type}</p>
                    <p>${result.description}</p>
                `;
                resultsContainer.appendChild(resultElement);
            });
        });
    </script>
</body>
</html> 